"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[325],{198:(e,t,n)=>{n.d(t,{W:()=>s});var r=n(184);const s=e=>{let{title:t,children:n}=e;return(0,r.jsxs)("section",{children:[t&&(0,r.jsx)("h2",{children:t}),n]})}},325:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});var r=n(791),s=n(434),a=n(634);const c=e=>e.contacts.items,o=e=>e.contacts.isLoading,l=e=>e.contacts.error,i=e=>e.filters;var d=n(198),u=n(686),h=n(184);const m=e=>{let{onCloseModal:t}=e;const n=(0,s.I0)(),r=(0,s.v9)(c);return(0,h.jsxs)("form",{onSubmit:e=>{e.preventDefault();const s=e.target,c=e.target.elements.name.value,o=e.target.elements.number.value;return r.some((e=>{let{name:t}=e;return t===c}))?alert("".concat(c," is already in contacts")):r.some((e=>{let{number:t}=e;return t===o}))?alert("".concat(o," is already in contacts")):(n((0,a.uK)({name:c,number:o.toString()})).unwrap().then((e=>{u.Notify.success("".concat(e.name," successfully added to contacts"))})).catch((()=>{u.Notify.failure("Sorry, something's wrong")})),t(),void s.reset())},autoComplete:"off",children:[(0,h.jsxs)("label",{children:["Name",(0,h.jsx)("input",{type:"text",name:"name",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0,placeholder:"Enter name ...",value:r.name})]}),(0,h.jsxs)("label",{children:["Number",(0,h.jsx)("input",{type:"tel",name:"number",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",placeholder:"Enter number ...",value:r.number})]}),(0,h.jsx)("button",{type:"submit",children:"New contact"})]})};var x=n(165);const p=()=>{const e=(0,s.I0)(),t=(0,s.v9)(i);return(0,h.jsx)("label",{children:(0,h.jsx)("input",{type:"text",name:"filter",placeholder:"Enter contact name",value:t,onChange:t=>{let{currentTarget:{value:n}}=t;const r=n.toLowerCase().trim();e((0,x.p)(r))}})})},j=e=>{let{id:t,name:n,number:r}=e;const c=(0,s.I0)();return(0,h.jsxs)("li",{children:[(0,h.jsx)("p",{children:n}),(0,h.jsx)("performance",{children:r}),(0,h.jsx)("button",{onClick:()=>{return e=t,void c((0,a.GK)(e)).unwrap().then((e=>{u.Notify.success("".concat(e.name," successfully deleted from contacts"))})).catch((()=>{u.Notify.failure("Sorry, something's wrong")}));var e},children:"Delete"})]},t)},v=()=>{const e=(0,s.v9)(c),t=(0,s.v9)(i),n=[...e.filter((e=>e.name.toLowerCase().includes(t)))];return(0,h.jsx)("ul",{children:n.map((e=>{let{name:t,number:n,id:r}=e;return(0,h.jsx)(j,{id:r,name:t,number:n},r)}))})},b=e=>{let{children:t,onCloseModal:n}=e;(0,r.useEffect)((()=>{const e=e=>{"Escape"===e.code&&n()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[n]);return(0,h.jsx)("div",{onClick:e=>{let{target:t,currentTarget:r}=e;r===t&&n()},children:(0,h.jsx)("div",{children:t})})},f=()=>{const e=(0,s.I0)(),t=(0,s.v9)(o),n=(0,s.v9)(l),[c,i]=(0,r.useState)(!1);(0,r.useEffect)((()=>{e((0,a.yF)())}),[e]);const u=()=>{i((e=>!e))};return(0,h.jsxs)("div",{children:[(0,h.jsxs)(d.W,{children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{children:"Contacts"}),(0,h.jsxs)("div",{children:[(0,h.jsx)(p,{}),(0,h.jsx)("button",{type:"button",onClick:u,children:"New Contact"})]})]}),t&&!n&&(0,h.jsx)("b",{children:"Request in progress"}),(0,h.jsx)(v,{})]}),c&&(0,h.jsx)(b,{children:(0,h.jsx)(d.W,{title:"Add New Contact",children:(0,h.jsx)(m,{onCloseModal:u})}),onCloseModal:u})]})}}}]);
//# sourceMappingURL=325.623699e7.chunk.js.map